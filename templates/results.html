{% extends "base.html" %}

{% block content %}

      <script>
function fetchTaskResult(taskId) {
  fetch('/api/tasks/' + taskId)
    .then(response => response.json())
    .then(data => {
      if (data.status === 'SUCCESS') {
        const messageString = 'Hello, world!';
        const messageElement = document.getElementById('message');
        messageElement.textContent = messageString;

        // Task result is available, display it on the web page
        const resultElement = document.getElementById('resultDiv');
        resultElement.textContent = data.result;
      } else {
        // Task result is still pending, continue checking after a delay
        setTimeout(() => fetchTaskResult(taskId), 3000); // Check again after 5 seconds
      }
    })
    .catch(error => {
      console.error('Error occurred while fetching task result:', error);
    });
}

  // Call the function to fetch the task result for a specific task ID
fetchTaskResult('{{ task_id }}');

  </script>


<div id="message"></div>

<div id="resultDiv"></div>

{% endblock %}

